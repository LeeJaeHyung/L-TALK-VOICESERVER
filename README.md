# L-TALK-VOICESERVER

## π“ μ†κ°
`L-TALK-VOICESERVER`λ” **L-TALK ν”„λ΅μ νΈμ μμ„± μ±„ν… μ„λ²„**λ΅, λ©”μΈ μ„λ²„(`LTALK-SERVER-v2`)μ™€μ TCP/IP λΉ„λ™κΈ° ν†µμ‹ κ³Ό ν΄λΌμ΄μ–ΈνΈμ™€μ UDP μμ„± λ°μ΄ν„° μ „μ†΅μ„ λ‹΄λ‹Ήν•©λ‹λ‹¤.  
λ©”μΈ μ„λ²„λ΅λ¶€ν„° μ „λ‹¬λ°›μ€ ν΄λΌμ΄μ–ΈνΈ μ •λ³΄ λ° μ±„ν…λ°© μ •λ³΄λ¥Ό κΈ°λ°μΌλ΅, μμ„± μ±„ν…λ°©μ„ μƒμ„± λ° κ΄€λ¦¬ν•λ©°, ν΄λΌμ΄μ–ΈνΈλ“¤ κ°„μ μμ„± λ°μ΄ν„°λ¥Ό μ¤‘κ³„ν•λ” μ—­ν• μ„ μν–‰ν•©λ‹λ‹¤.

---

## π› οΈ μ£Όμ” κΈ°λ¥

### β… λ©”μΈ μ„λ²„μ™€μ λΉ„λ™κΈ° TCP/IP ν†µμ‹ 
- `AsynchronousSocketChannel`μ„ μ‚¬μ©ν• λ…ΌλΈ”λ΅ν‚Ή λΉ„λ™κΈ° TCP ν†µμ‹ 
- λ©”μΈ μ„λ²„μ™€μ μ—°κ²°μ„ ν†µν•΄ ν΄λΌμ΄μ–ΈνΈ μ ‘μ† μ •λ³΄ (`chatRoomId`, `memberId`, `ip`, `port`) μμ‹ 
- μμ‹ λ μ •λ³΄λ¥Ό λ°”νƒ•μΌλ΅ μμ„± μ±„ν…λ°©μ„ κµ¬μ„± λ° ν΄λΌμ΄μ–ΈνΈ κ΄€λ¦¬

### β… UDP κΈ°λ° μμ„± λ°μ΄ν„° μ „μ†΅
- ν΄λΌμ΄μ–ΈνΈ β†” VOICESERVER κ°„ UDPλ¥Ό ν†µν• μμ„± ν¨ν‚· μ†΅μμ‹ 
- κ° ν΄λΌμ΄μ–ΈνΈμ `DatagramSocket` μ£Όμ†λ¥Ό κΈ°λ°μΌλ΅ λ°μ΄ν„° μ „μ†΅
- λ©€ν‹° ν΄λΌμ΄μ–ΈνΈ ν™κ²½μ—μ„ μμ„± λ°μ΄ν„° μ „ν (λ‹¤μ¤‘ μ‚¬μ©μ μμ„± μ±„ν… μ§€μ›)

### β… μ±„ν…λ°© λ° ν΄λΌμ΄μ–ΈνΈ κ΄€λ¦¬
- `Map<chatRoomId, List<Member>>` κµ¬μ΅°λ΅ μ±„ν…λ°© λ° μ°Έμ—¬μ μ •λ³΄ κ΄€λ¦¬
- ν΄λΌμ΄μ–ΈνΈμ μ…μ¥, ν‡΄μ¥ μ²λ¦¬ λ° μ±„ν…λ°© λ‚΄ μ‚¬μ©μ λ©λ΅ μ μ§€
- μμ„± λ°μ΄ν„° μ†΅μμ‹  μ‹ ν•΄λ‹Ή μ±„ν…λ°©μ λ¨λ“  μ°Έμ—¬μμ—κ² ν¨ν‚· μ „μ†΅

---

## β΅ μ£Όμ” ν†µμ‹  νλ¦„

1. λ©”μΈ μ„λ²„ β†’ VOICESERVER: TCPλ¥Ό ν†µν•΄ `chatRoomId`, `memberId`, `ip`, `port` μ „λ‹¬
2. VOICESERVER: μ „λ‹¬λ°›μ€ μ •λ³΄λ΅ μ±„ν…λ°© κµ¬μ„± (`VoiceRoom`, `VoiceMember` μƒμ„± λ° κ΄€λ¦¬)
3. ν΄λΌμ΄μ–ΈνΈ β†” VOICESERVER: UDPλ¥Ό μ΄μ©ν• μμ„± λ°μ΄ν„° μ†΅μμ‹ 
4. VOICESERVER: μμ‹ λ μμ„± λ°μ΄ν„°λ¥Ό κ°™μ€ μ±„ν…λ°©μ λ‹¤λ¥Έ ν΄λΌμ΄μ–ΈνΈλ“¤μ—κ² μ „ν

---

## π€ μ‚¬μ© κΈ°μ 

| κΈ°μ  μ¤νƒ                  | μ„¤λ…                                         |
| ------------------------- | -------------------------------------------- |
| Java (NIO)                | λΉ„λ™κΈ° TCP ν†µμ‹  (`AsynchronousSocketChannel`) |
| UDP (DatagramSocket)      | ν΄λΌμ΄μ–ΈνΈμ™€ μμ„± λ°μ΄ν„° μ†΅μμ‹              |
| Gradle                    | λΉλ“ λ° μμ΅΄μ„± κ΄€λ¦¬                         |

---

## π“ μ£Όμ” ν΄λμ¤ μ„¤λ…

### β–¶οΈ `MainVoiceServer.java`
- μμ„± μ„λ²„ μ‹¤ν–‰ λ° μ΄κΈ°ν™”
- `ServerController` μ‹¤ν–‰

### β–¶οΈ `ServerController.java`
- λ©”μΈ μ„λ²„μ™€μ TCP λΉ„λ™κΈ° ν†µμ‹  μ²λ¦¬
- ν΄λΌμ΄μ–ΈνΈ UDP ν¨ν‚· μ†΅μμ‹  λ° ν΄λΌμ΄μ–ΈνΈ-μ±„ν…λ°© κ΄€λ¦¬

### β–¶οΈ `VoiceRoom.java`
- μ±„ν…λ°© ID, μ°Έμ—¬μ λ©λ΅ (`List<VoiceMember>`) κ΄€λ¦¬

### β–¶οΈ `VoiceMember.java`
- `memberId`, `chatRoomId`, ν΄λΌμ΄μ–ΈνΈμ UDP `SocketAddress` μ •λ³΄ λ³΄μ 

---

## π“ κ°λ° μ¤‘ μ°Έκ³ ν• μ΄μλ“¤

- TCPλ΅ ν΄λΌμ΄μ–ΈνΈ μ…μ¥ μ •λ³΄λ¥Ό μμ‹  ν›„, UDPλ¥Ό ν†µν• μμ„± λ°μ΄ν„° μ†΅μμ‹  μ²λ¦¬
- ν¨ν‚· μ†μ‹¤, μ§€μ—° λ¬Έμ  λ€μ‘μ„ μ„ν• κΈ°λ³Έ μ„¤κ³„
- λ©€ν‹°μ¤λ λ”© ν™κ²½μ—μ„μ λ™μ‹ μ‚¬μ©μ κ΄€λ¦¬

---

## π’¬ ν–¥ν›„ κ°λ° κ³„ν

- UDP ν¨ν‚· μ§€μ—° λ³΄μ • λ° ν¨ν‚· μ†μ‹¤ λ€μ‘ λ΅μ§ μ¶”κ°€
- μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈμ λΉ„μ •μƒ μΆ…λ£ κ°μ§€ λ° μ •λ¦¬ λ΅μ§ κ°μ„ 

---

## π“§ Contact

- κ°λ°μ: JaeHyung Lee  
- ν”„λ΅μ νΈ: L-TALK

